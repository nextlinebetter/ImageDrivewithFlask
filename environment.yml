name: webimagedrive
channels:
  - pytorch
  - conda-forge
  - defaults
dependencies:
  # Pin Python 3.12 for faiss/torch compatibility on macOS
  - python=3.12
  - pip
  # Conda packages (compiled/binary heavy ones here)
  - numpy
  - pillow
  - faiss-cpu
  # Torch stack compatible with NumPy 2 on macOS conda
  - pytorch
  - torchvision
  # The rest via pip
  - pip:
      - Flask
      - Flask-SQLAlchemy
      - Flask-Migrate
      - Flask-JWT-Extended
      - python-dotenv
      - bcrypt
      - sentence-transformers
      - tqdm
      # OCR stack: doctr pinned for stability; works with NumPy 2 when torch/vision are compatible
      - python-doctr
      - opencv-python-headless
      - rapidfuzz
      - kaggle
