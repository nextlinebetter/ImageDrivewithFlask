name: webimagedrive
channels:
  - pytorch
  - conda-forge
  - defaults
dependencies:
  # Pin Python 3.12 for faiss/torch compatibility on macOS
  - python=3.12
  - pip
  # Conda packages (compiled/binary heavy ones here)
  - numpy>=2,<3
  - pillow
  - faiss-cpu
  # Torch stack compatible with NumPy 2 on macOS conda
  - pytorch>=2.4,<2.6
  - torchvision>=0.19,<0.21
  # The rest via pip
  - pip:
      - Flask>=3.0
      - Flask-SQLAlchemy>=3.1
      - Flask-Migrate>=4.0
      - Flask-JWT-Extended>=4.6
      - python-dotenv>=1.0
      - bcrypt>=4.0
      - sentence-transformers>=2.6
      - tqdm>=4.66
      # OCR stack: doctr pinned for stability; works with NumPy 2 when torch/vision are compatible
      - python-doctr==1.0.0
      - opencv-python-headless>=4.8
      - rapidfuzz>=3.6
